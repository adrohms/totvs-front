<div class="totvs-container" [class.is-mobile]="mobileQuery.matches">

  <mat-toolbar color="primary" class="totvs-toolbar">
    <div class="totvs-brand">
      <a *ngIf="!isSidebarClosedAndIsAutenticated" [routerLink]="isAuthenticated ? 'home' : 'landing-page'">
        <svg width="126" height="38" viewBox="0 0 186 55" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M42.918 3.46093C49.3596 8.22265 52.9853 14.2582 55 22C56.2017 30.5834 54.3049 37.7018 49.75 45.0039C45.9104 50.0543 41.0658 53.2009 35 55C25.2335 56.187 16.9325 55.5708 9.04297 49.4922C3.40128 44.385 0.420772 38.9908 -0.378905 31.4062C-0.683918 21.5671 0.520956 14.5517 7.1875 7.18749C16.9925 -1.68861 31.367 -3.39685 42.918 3.46093ZM20 8.99999C19.67 9.32999 19.34 9.65999 19 9.99999C19 12.64 19 15.28 19 18C24.28 19.65 29.56 21.3 35 23C35.1444 24.7737 35.2887 26.5475 35.4375 28.375C35.6929 32.3326 35.6929 32.3326 37 36C38.8591 36.5037 38.8591 36.5037 41 36.6875C41.7219 36.7739 42.4438 36.8602 43.1875 36.9492C43.7856 36.966 44.3838 36.9827 45 37C47.2589 34.7411 46.3264 29.6562 46.375 26.625C46.4124 25.7484 46.4498 24.8719 46.4883 23.9687C46.5215 21.5537 46.4724 19.369 46 17C42.627 13.7742 38.0206 12.9862 33.5625 11.875C32.9199 11.7061 32.2773 11.5373 31.6152 11.3633C27.7705 10.3718 23.9426 9.4876 20 8.99999ZM9 17C8.19374 20.5386 7.86471 23.8102 7.875 27.4375C7.87242 28.3437 7.86984 29.2499 7.86719 30.1836C8.0088 33.1865 8.45192 36.0465 9 39C12.3927 40.0109 15.7896 41.0068 19.1875 42C20.6271 42.4292 20.6271 42.4292 22.0957 42.8672C23.4927 43.2732 23.4927 43.2732 24.918 43.6875C25.7716 43.9389 26.6252 44.1902 27.5046 44.4492C30.081 45.0179 32.3705 45.0988 35 45C35 42.03 35 39.06 35 36C29.72 34.68 24.44 33.36 19 32C18.67 27.71 18.34 23.42 18 19C13.545 18.01 13.545 18.01 9 17Z" fill="white"/>
          <path d="M109 13C112.725 16.5391 113.804 19.5433 114.203 24.5508C114.304 30.5191 114.033 34.8001 111 40C107.121 43.6228 103.82 43.5558 98.7031 43.4258C94.459 42.7573 92.8201 41.1911 90 38C88.7881 34.3645 88.739 30.9759 88.6875 27.1875C88.644 26.1385 88.644 26.1385 88.5996 25.0684C88.5373 19.9432 89.5907 17.0386 93 13C98.5107 10.4067 103.458 10.7166 109 13ZM97 21C96.6797 24.0582 96.6797 24.0582 96.75 27.5C96.7448 28.6653 96.7397 29.8306 96.7344 31.0313C96.6907 34.1183 96.6907 34.1183 99 36C102.099 35.678 102.099 35.678 105 35C105.924 32.2295 106.163 30.4331 106.187 27.5625C106.202 26.8007 106.216 26.0388 106.23 25.2539C105.976 22.7665 105.24 21.1519 104 19C100.045 18.6518 100.045 18.6518 97 21Z" fill="white"/>
          <path d="M138 12C140.64 12 143.28 12 146 12C146.674 14.7276 147.339 17.4568 148 20.1875C148.191 20.9564 148.382 21.7254 148.578 22.5176C149.516 26.4208 150.26 29.9523 150 34C150.66 34 151.32 34 152 34C152.103 32.7831 152.206 31.5662 152.312 30.3125C152.988 24.0904 154.509 18.0687 156 12C158.64 12 161.28 12 164 12C163.397 18.6689 162.211 24.9525 160.562 31.4375C160.345 32.334 160.128 33.2306 159.904 34.1543C159.69 35.0096 159.475 35.8649 159.254 36.7461C159.061 37.5162 158.869 38.2864 158.67 39.0798C158 41 158 41 156 43C153.941 43.3008 153.941 43.3008 151.562 43.3125C150.389 43.3376 150.389 43.3376 149.191 43.3633C146.406 42.9015 145.761 42.184 144 40C143.109 37.5198 143.109 37.5198 142.395 34.5977C142.133 33.5426 141.872 32.4875 141.604 31.4004C141.342 30.2989 141.081 29.1974 140.812 28.0625C140.54 26.9649 140.267 25.8672 139.986 24.7363C138.918 20.3476 138 16.5372 138 12Z" fill="white"/>
          <path d="M179.75 11.375C180.714 11.4652 181.678 11.5555 182.672 11.6484C185 12 185 12 186 13C186 14.98 186 16.96 186 19C181.71 19 177.42 19 173 19C175.419 21.4194 177.202 22.8571 180.062 24.5625C182.372 25.9431 184.085 27.0851 186 29C186.371 31.2422 186.371 31.2422 186.437 33.875C186.477 34.7387 186.517 35.6023 186.559 36.4922C186 39 186 39 183.926 41.3008C180.28 43.4179 177.938 43.4396 173.75 43.3125C172.507 43.288 171.265 43.2635 169.984 43.2383C167 43 167 43 166 42C166 40.02 166 38.04 166 36C169.96 36 173.92 36 178 36C175.954 31.9089 175.198 31.1887 171.5 28.9375C168.409 27.0459 167.056 26.0845 165 23C164.507 19.219 164.71 17.4838 166.687 14.1875C170.6 10.4869 174.598 10.8598 179.75 11.375Z" fill="white"/>
          <path d="M66 12C73.26 12 80.52 12 88 12C88 13.98 88 15.96 88 18C87.67 18.33 87.34 18.66 87 19C85.02 19 83.04 19 81 19C81 26.92 81 34.84 81 43C78.36 43 75.72 43 73 43C73 35.08 73 27.16 73 19C70.69 19 68.38 19 66 19C66 16.69 66 14.38 66 12Z" fill="white"/>
          <path d="M114 12C121.59 12 129.18 12 137 12C137 13.98 137 15.96 137 18C136.67 18.33 136.34 18.66 136 19C133.69 19 131.38 19 129 19C129 26.92 129 34.84 129 43C126.69 43 124.38 43 122 43C122 35.08 122 27.16 122 19C119.69 19 117.38 19 115 19C114.67 18.67 114.34 18.34 114 18C114 16.02 114 14.04 114 12Z" fill="white"/>
        </svg>
      </a>

      <a *ngIf="isSidebarClosedAndIsAutenticated" color="primary" [routerLink]="isAuthenticated ? 'home' : 'landing-page'">
        <svg width="38" height="38" viewBox="0 0 56 55" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M42.918 3.46093C49.3596 8.22265 52.9853 14.2582 55 22C56.2017 30.5834 54.3049 37.7018 49.75 45.0039C45.9104 50.0543 41.0658 53.2009 35 55C25.2335 56.187 16.9325 55.5708 9.04297 49.4922C3.40128 44.385 0.420772 38.9908 -0.378905 31.4062C-0.683918 21.5671 0.520956 14.5517 7.1875 7.18749C16.9925 -1.68861 31.367 -3.39685 42.918 3.46093ZM20 8.99999C19.67 9.32999 19.34 9.65999 19 9.99999C19 12.64 19 15.28 19 18C24.28 19.65 29.56 21.3 35 23C35.1444 24.7737 35.2887 26.5475 35.4375 28.375C35.6929 32.3326 35.6929 32.3326 37 36C38.8591 36.5037 38.8591 36.5037 41 36.6875C41.7219 36.7739 42.4438 36.8602 43.1875 36.9492C43.7856 36.966 44.3838 36.9827 45 37C47.2589 34.7411 46.3264 29.6562 46.375 26.625C46.4124 25.7484 46.4498 24.8719 46.4883 23.9687C46.5215 21.5537 46.4724 19.369 46 17C42.627 13.7742 38.0206 12.9862 33.5625 11.875C32.9199 11.7061 32.2773 11.5373 31.6152 11.3633C27.7705 10.3718 23.9426 9.4876 20 8.99999ZM9 17C8.19374 20.5386 7.86471 23.8102 7.875 27.4375C7.87242 28.3437 7.86984 29.2499 7.86719 30.1836C8.0088 33.1865 8.45192 36.0465 9 39C12.3927 40.0109 15.7896 41.0068 19.1875 42C20.6271 42.4292 20.6271 42.4292 22.0957 42.8672C23.4927 43.2732 23.4927 43.2732 24.918 43.6875C25.7716 43.9389 26.6252 44.1902 27.5046 44.4492C30.081 45.0179 32.3705 45.0988 35 45C35 42.03 35 39.06 35 36C29.72 34.68 24.44 33.36 19 32C18.67 27.71 18.34 23.42 18 19C13.545 18.01 13.545 18.01 9 17Z" fill="white"/>
        </svg>
      </a>

      <button *ngIf="isAuthenticated" mat-icon-button color="accent" (click)="toggleSidenav()">
        <svg [ngClass]="isSidebarClosed ? 'totvs-sidebar-close' : 'totvs-sidebar-open'" width="100px" height="100px" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" fill="none">
          <path fill="#FFFFFF" fill-rule="evenodd" d="M2.293 15.293a1 1 0 101.414 1.414l6-6a1 1 0 000-1.414l-6-6a1 1 0 00-1.414 1.414L7.586 10l-5.293 5.293zm8 0a1 1 0 101.414 1.414l6-6a1 1 0 000-1.414l-6-6a1 1 0 10-1.414 1.414L15.586 10l-5.293 5.293z"/>
        </svg>
      </button>
    </div>

    <div class="totvs-menu-item">
      <a mat-menu-item [matMenuTriggerFor]="userMenu" >
        <div class="totvs-person-more-icon">
          <mat-icon> person </mat-icon>
          <mat-icon> expand_more </mat-icon>
        </div>
        <mat-menu #userMenu class="totvs-menu">
          <button *ngIf="!isAuthenticated" mat-menu-item routerLink="/account/login">
            <mat-icon>login</mat-icon>
            <span>Entrar</span>
          </button>
          <button *ngIf="!isAuthenticated" mat-menu-item routerLink="/account/register">
            <mat-icon>person_add</mat-icon>
            <span>Cadastrar</span>
          </button>

          <!-- Logged in -->
          <button *ngIf="isAuthenticated" mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Sair</span>
          </button>
          <button *totvsHasAnyAuthority="'ADMIN'" mat-menu-item routerLink="/account/gerenciar">
            <mat-icon>manage_accounts</mat-icon>
            <span>Gerenciar usu√°rios</span>
          </button>
        </mat-menu>
      </a>
    </div>
  </mat-toolbar>

  <mat-sidenav-container *ngIf="isAuthenticated"
                         class="totvs-sidenav-container"
                         [style.marginTop.px]="mobileQuery.matches ? 56 : 0">

    <mat-sidenav #totvsSidenav
                 [mode]="mobileQuery.matches ? 'over' : 'side'"
                 [fixedInViewport]="mobileQuery.matches"
                 class="totvs-sidenav"
                 [ngClass]="isSidebarClosed ? 'totvs-sidenav__closed' : 'totvs-sidenav__opened'">

      <mat-nav-list class="totvs-sidebar-nav-list">
        <a mat-list-item routerLink="/crm">
          <div class="totvs-list-content">
            <mat-icon> person </mat-icon>
            <span> CRM </span>
          </div>
        </a>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content class="totvs-content">
      <router-outlet></router-outlet>
    </mat-sidenav-content>
  </mat-sidenav-container>

  <router-outlet *ngIf="!isAuthenticated"></router-outlet>

</div>

